#!/usr/bin/env bash
set -euo pipefail

export DEBIAN_FRONTEND=noninteractive

cmd="$1"
shift

case "$cmd" in
  update)
    >&2 echo updating package lists...
    apt-get update --quiet=2
    ;;

  upgrade)
    >&2 echo upgrading all packages...
    apt-get upgrade --quiet=2 --yes
    ;;

  install)
    >&2 echo "installing packages: $*"
    apt-get install --quiet=2 --no-install-recommends --yes "$@"
    ;;

  remove)
    >&2 echo "removing packages: $*"
    apt-get remove --quiet=2 --yes "$@"
    ;;

  shrink)
    >&2 echo "shrinking image..."
    apt-get clean
    rm -rf /var/lib/apt/lists/*
    ;;

  *)
    >&2 echo "$0: invalid command: $cmd"
    return 1
esac
